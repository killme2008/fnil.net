<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clj-xmemcached.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clj-xmemcached 0.3.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="clj-xmemcached.core.html"><span>clj-xmemcached.core</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="clj-xmemcached.core.html#var-*memcached-client*"><span>*memcached-client*</span></a></li><li><a href="clj-xmemcached.core.html#var--%3EGZipCompressor"><span>-&gt;GZipCompressor</span></a></li><li><a href="clj-xmemcached.core.html#var--%3Eclj_json_transcoder"><span>-&gt;clj_json_transcoder</span></a></li><li><a href="clj-xmemcached.core.html#var--%3Enippy_transcoder"><span>-&gt;nippy_transcoder</span></a></li><li><a href="clj-xmemcached.core.html#var-Compressor"><span>Compressor</span></a></li><li><a href="clj-xmemcached.core.html#var-MemcachedTranscoder"><span>MemcachedTranscoder</span></a></li><li><a href="clj-xmemcached.core.html#var-add"><span>add</span></a></li><li><a href="clj-xmemcached.core.html#var-append"><span>append</span></a></li><li><a href="clj-xmemcached.core.html#var-byte-array-class"><span>byte-array-class</span></a></li><li><a href="clj-xmemcached.core.html#var-bytes%3F"><span>bytes?</span></a></li><li><a href="clj-xmemcached.core.html#var-cas"><span>cas</span></a></li><li><a href="clj-xmemcached.core.html#var-clj-json-transcoder"><span>clj-json-transcoder</span></a></li><li><a href="clj-xmemcached.core.html#var-compress"><span>compress</span></a></li><li><a href="clj-xmemcached.core.html#var-decompress"><span>decompress</span></a></li><li><a href="clj-xmemcached.core.html#var-decr"><span>decr</span></a></li><li><a href="clj-xmemcached.core.html#var-def-transcoder"><span>def-transcoder</span></a></li><li><a href="clj-xmemcached.core.html#var-default-compressor"><span>default-compressor</span></a></li><li><a href="clj-xmemcached.core.html#var-define-incr-decr-fn"><span>define-incr-decr-fn</span></a></li><li><a href="clj-xmemcached.core.html#var-define-store-fn"><span>define-store-fn</span></a></li><li><a href="clj-xmemcached.core.html#var-delete"><span>delete</span></a></li><li><a href="clj-xmemcached.core.html#var-flush-all"><span>flush-all</span></a></li><li><a href="clj-xmemcached.core.html#var-get"><span>get</span></a></li><li><a href="clj-xmemcached.core.html#var-get-memcached-client"><span>get-memcached-client</span></a></li><li><a href="clj-xmemcached.core.html#var-gets"><span>gets</span></a></li><li><a href="clj-xmemcached.core.html#var-incr"><span>incr</span></a></li><li><a href="clj-xmemcached.core.html#var-mashall"><span>mashall</span></a></li><li><a href="clj-xmemcached.core.html#var-memcached"><span>memcached</span></a></li><li><a href="clj-xmemcached.core.html#var-nippy-transcoder"><span>nippy-transcoder</span></a></li><li><a href="clj-xmemcached.core.html#var-no-client-error"><span>no-client-error</span></a></li><li><a href="clj-xmemcached.core.html#var-prepend"><span>prepend</span></a></li><li><a href="clj-xmemcached.core.html#var-replace"><span>replace</span></a></li><li><a href="clj-xmemcached.core.html#var-set"><span>set</span></a></li><li><a href="clj-xmemcached.core.html#var-set-client%21"><span>set-client!</span></a></li><li><a href="clj-xmemcached.core.html#var-shutdown"><span>shutdown</span></a></li><li><a href="clj-xmemcached.core.html#var-stats"><span>stats</span></a></li><li><a href="clj-xmemcached.core.html#var-through"><span>through</span></a></li><li><a href="clj-xmemcached.core.html#var-touch"><span>touch</span></a></li><li><a href="clj-xmemcached.core.html#var-try-lock"><span>try-lock</span></a></li><li><a href="clj-xmemcached.core.html#var-unmashall"><span>unmashall</span></a></li><li><a href="clj-xmemcached.core.html#var-with-client"><span>with-client</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>clj-xmemcached.core documentation</h2><pre class="doc">The clj-xmemcached core
</pre><div class="public" id="var-*memcached-client*"><h3>*memcached-client*</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var--%3EGZipCompressor"><h3>-&gt;GZipCompressor</h3><div class="usage"><code>(-&gt;GZipCompressor)</code></div><pre class="doc">Positional factory function for class clj_xmemcached.core.GZipCompressor.
</pre></div><div class="public" id="var--%3Eclj_json_transcoder"><h3>-&gt;clj_json_transcoder</h3><div class="usage"><code>(-&gt;clj_json_transcoder)</code></div><pre class="doc">Positional factory function for class clj_xmemcached.core.clj_json_transcoder.
</pre></div><div class="public" id="var--%3Enippy_transcoder"><h3>-&gt;nippy_transcoder</h3><div class="usage"><code>(-&gt;nippy_transcoder)</code></div><pre class="doc">Positional factory function for class clj_xmemcached.core.nippy_transcoder.
</pre></div><div class="public" id="var-Compressor"><h3>Compressor</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-MemcachedTranscoder"><h3>MemcachedTranscoder</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-add"><h3>add</h3><div class="usage"><code>(add key value)</code><code>(add key value expire)</code></div><pre class="doc">Add an item with key and value,success only when item is not exists.
</pre></div><div class="public" id="var-append"><h3>append</h3><div class="usage"><code>(append key value)</code></div><pre class="doc">Append a string to an existing item&apos;s value by key
</pre></div><div class="public" id="var-byte-array-class"><h3>byte-array-class</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-bytes%3F"><h3>bytes?</h3><div class="usage"><code>(bytes? x)</code></div><pre class="doc"></pre></div><div class="public" id="var-cas"><h3>cas</h3><div class="usage"><code>(cas key cas-fn)</code><code>(cas key cas-fn max-times)</code><code>(cas key cas-fn max-times expire)</code></div><pre class="doc">Compare and set an item&apos;s value by key
set the new value to:
     (cas-fn current-value)</pre></div><div class="public" id="var-clj-json-transcoder"><h3>clj-json-transcoder</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-compress"><h3>compress</h3><div class="usage"><code>(compress this bs)</code></div><pre class="doc">Compress byte array.
</pre></div><div class="public" id="var-decompress"><h3>decompress</h3><div class="usage"><code>(decompress this bs)</code></div><pre class="doc">Decompress byte array.
</pre></div><div class="public" id="var-decr"><h3>decr</h3><div class="usage"><code>(decr key__2528__auto__ delta__2529__auto__)</code><code>(decr key__2528__auto__ delta__2529__auto__ init__2530__auto__)</code><code>(decr key__2528__auto__ delta__2529__auto__ init__2530__auto__ expire__2531__auto__)</code></div><pre class="doc">Decrease an item&apos;s value by key
</pre></div><div class="public" id="var-def-transcoder"><h3>def-transcoder</h3><h4 class="macro">macro</h4><div class="usage"><code>(def-transcoder name &amp; body)</code></div><pre class="doc"></pre></div><div class="public" id="var-default-compressor"><h3>default-compressor</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-define-incr-decr-fn"><h3>define-incr-decr-fn</h3><h4 class="macro">macro</h4><div class="usage"><code>(define-incr-decr-fn meta name)</code></div><pre class="doc"></pre></div><div class="public" id="var-define-store-fn"><h3>define-store-fn</h3><h4 class="macro">macro</h4><div class="usage"><code>(define-store-fn meta name)</code></div><pre class="doc"></pre></div><div class="public" id="var-delete"><h3>delete</h3><div class="usage"><code>(delete key)</code><code>(delete key cas)</code></div><pre class="doc">Delete an item by key [with CAS values that was get in binary protocol].
</pre></div><div class="public" id="var-flush-all"><h3>flush-all</h3><div class="usage"><code>(flush-all)</code><code>(flush-all cli)</code></div><pre class="doc">Flush all values in memcached.WARNNING:this method will remove all items in memcached.
</pre></div><div class="public" id="var-get"><h3>get</h3><div class="usage"><code>(get k)</code><code>(get k1 k2)</code><code>(get k1 k2 &amp; ks)</code></div><pre class="doc">Get items by a key or many keys,when bulk get items,the result is java.util.HashMap
</pre></div><div class="public" id="var-get-memcached-client"><h3>get-memcached-client</h3><div class="usage"><code>(get-memcached-client)</code></div><pre class="doc"></pre></div><div class="public" id="var-gets"><h3>gets</h3><div class="usage"><code>(gets key)</code></div><pre class="doc">Gets an item&apos;s value by key,return value has a cas value
</pre></div><div class="public" id="var-incr"><h3>incr</h3><div class="usage"><code>(incr key__2528__auto__ delta__2529__auto__)</code><code>(incr key__2528__auto__ delta__2529__auto__ init__2530__auto__)</code><code>(incr key__2528__auto__ delta__2529__auto__ init__2530__auto__ expire__2531__auto__)</code></div><pre class="doc">Increase an item&apos;s value by key
</pre></div><div class="public" id="var-mashall"><h3>mashall</h3><div class="usage"><code>(mashall this obj)</code></div><pre class="doc">Encode object into a byte array
</pre></div><div class="public" id="var-memcached"><h3>memcached</h3><div class="usage"><code>(memcached servers &amp; opts)</code></div><pre class="doc">Create a memcached client with zero or more options(any order):
:protocol  Protocol to talk with memcached,a keyword in :text,:binary or :kestrel,default is text.
:hash  Hash algorithm,a keyword in  :consistent, :standard or :php, default is standard hash.
:pool  Connection pool size,default is 1,it&apos;s a recommended value.
:sanitize-keys  Whether to sanitize keys before operation,default is false.
:reconnect  Whether to reconnect when connections are disconnected,default is true.
:transcoder Transcoder to encode/decode data.
:session-locator memcached connection locator,default is created by :hash algorithm value.
:heartbeat  Whether to do heartbeating when connections are idle,default is true.
:timeout  Operation timeout in milliseconds,default is five seconds.
:compress-threshold Value compression threhold in bytes, default is 16K.
:name  A name to define a memcached client instance
:selector-pool-size  Reactor pool size for every client instance, it&apos;s computed based on CPUs number by default.</pre></div><div class="public" id="var-nippy-transcoder"><h3>nippy-transcoder</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-no-client-error"><h3>no-client-error</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-prepend"><h3>prepend</h3><div class="usage"><code>(prepend key value)</code></div><pre class="doc">Prepend a string to an existing item&apos;s value by key
</pre></div><div class="public" id="var-replace"><h3>replace</h3><div class="usage"><code>(replace key value)</code><code>(replace key value expire)</code></div><pre class="doc">Replace an existing item&apos;s value by new value
</pre></div><div class="public" id="var-set"><h3>set</h3><div class="usage"><code>(set key value)</code><code>(set key value expire)</code></div><pre class="doc">Set an item with key and value.
</pre></div><div class="public" id="var-set-client%21"><h3>set-client!</h3><div class="usage"><code>(set-client! client)</code></div><pre class="doc">Set a global  memcached client for all thread contexts,prefer binding a client by `with-client` macro
</pre></div><div class="public" id="var-shutdown"><h3>shutdown</h3><div class="usage"><code>(shutdown)</code><code>(shutdown cli)</code></div><pre class="doc">Shutdown the memcached client
</pre></div><div class="public" id="var-stats"><h3>stats</h3><div class="usage"><code>(stats)</code><code>(stats cli)</code></div><pre class="doc">Get statistics info from all memcached servers
</pre></div><div class="public" id="var-through"><h3>through</h3><h4 class="macro">macro</h4><div class="usage"><code>(through key load)</code><code>(through key expire load)</code></div><pre class="doc">A macro to get item from cache or cache the value evaluated by load cause.
For example,you want to get the user from memcached if it is exists in cache
or load it from database to memcached and return it:

  (through uid 60
      (load-user-from-db uid)) </pre></div><div class="public" id="var-touch"><h3>touch</h3><div class="usage"><code>(touch key expire)</code></div><pre class="doc">Touch a item with new expire time.
</pre></div><div class="public" id="var-try-lock"><h3>try-lock</h3><h4 class="macro">macro</h4><div class="usage"><code>(try-lock key expire then)</code><code>(try-lock key expire then else)</code></div><pre class="doc">Lightweight distribution lock.
Try to lock with the global key,if gettting lock successfully,
then do something,
else do other things.For example,get the global lock to initial
in 5 seconds:

 (try-lock &quot;init-lock&quot; 5000
     (start-service))</pre></div><div class="public" id="var-unmashall"><h3>unmashall</h3><div class="usage"><code>(unmashall this bs)</code></div><pre class="doc">Decode a byte array to a object.
</pre></div><div class="public" id="var-with-client"><h3>with-client</h3><h4 class="macro">macro</h4><div class="usage"><code>(with-client client &amp; body)</code></div><pre class="doc">Evalutes body in the context of a thread-bound client to a memcached server.
</pre></div></div></body></html>
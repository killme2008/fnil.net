<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>carmine-sentinel.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Carmine-sentinel 0.1.0-RC5 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="carmine-sentinel.core.html"><span>carmine-sentinel.core</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="carmine-sentinel.core.html#var-add-sentinel-groups%21"><span>add-sentinel-groups!</span></a></li><li><a href="carmine-sentinel.core.html#var-get-sentinel-redis-spec"><span>get-sentinel-redis-spec</span></a></li><li><a href="carmine-sentinel.core.html#var-notify-event-listeners"><span>notify-event-listeners</span></a></li><li><a href="carmine-sentinel.core.html#var-register-listener%21"><span>register-listener!</span></a></li><li><a href="carmine-sentinel.core.html#var-remove-last-resolved-spec%21"><span>remove-last-resolved-spec!</span></a></li><li><a href="carmine-sentinel.core.html#var-remove-sentinel-group%21"><span>remove-sentinel-group!</span></a></li><li><a href="carmine-sentinel.core.html#var-sentinel-get-master-addr-by-name"><span>sentinel-get-master-addr-by-name</span></a></li><li><a href="carmine-sentinel.core.html#var-sentinel-sentinels"><span>sentinel-sentinels</span></a></li><li><a href="carmine-sentinel.core.html#var-sentinel-slaves"><span>sentinel-slaves</span></a></li><li><a href="carmine-sentinel.core.html#var-set-sentinel-groups%21"><span>set-sentinel-groups!</span></a></li><li><a href="carmine-sentinel.core.html#var-sync-on"><span>sync-on</span></a></li><li><a href="carmine-sentinel.core.html#var-unregister-listener%21"><span>unregister-listener!</span></a></li><li><a href="carmine-sentinel.core.html#var-update-conn-spec"><span>update-conn-spec</span></a></li><li><a href="carmine-sentinel.core.html#var-wcar"><span>wcar</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>carmine-sentinel.core documentation</h2><pre class="doc"></pre><div class="public" id="var-add-sentinel-groups%21"><h3>add-sentinel-groups!</h3><div class="usage"><code>(add-sentinel-groups! conf)</code></div><pre class="doc">Add sentinel groups,it will be merged into current conf:
 {:group-name {:specs  [{ :host host
                        :port port
                        :password password
                        :timeout-ms timeout-ms },
                        ...other sentinel instances...]
               :pool {&lt;opts&gt;}}}
The conf is a map of sentinel group to connection spec.</pre></div><div class="public" id="var-get-sentinel-redis-spec"><h3>get-sentinel-redis-spec</h3><div class="usage"><code>(get-sentinel-redis-spec sg master-name {:keys [prefer-slave? slaves-balancer], :or {prefer-slave? false, slaves-balancer first}, :as opts})</code></div><pre class="doc">Get redis spec by sentinel-group and master name.
If it is not resolved, it will query from sentinel and
cache the result in memory.
Recommend to call this function at your app startup  to reduce
resolving cost.</pre></div><div class="public" id="var-notify-event-listeners"><h3>notify-event-listeners</h3><div class="usage"><code>(notify-event-listeners event)</code></div><pre class="doc"></pre></div><div class="public" id="var-register-listener%21"><h3>register-listener!</h3><div class="usage"><code>(register-listener! listener)</code></div><pre class="doc">Register listener for switching master.
The listener will be called with an event:
  {:event &quot;+switch-master&quot;
   :old {:host old-master-ip
         :port old-master-port
   :new {:host new-master-ip
         :port new-master-port}}}
</pre></div><div class="public" id="var-remove-last-resolved-spec%21"><h3>remove-last-resolved-spec!</h3><div class="usage"><code>(remove-last-resolved-spec! sg master-name)</code></div><pre class="doc">Remove last resolved master spec by sentinel group and master name.
</pre></div><div class="public" id="var-remove-sentinel-group%21"><h3>remove-sentinel-group!</h3><div class="usage"><code>(remove-sentinel-group! group-name)</code></div><pre class="doc">Remove a sentinel group configuration by name.
</pre></div><div class="public" id="var-sentinel-get-master-addr-by-name"><h3>sentinel-get-master-addr-by-name</h3><div class="usage"><code>(sentinel-get-master-addr-by-name name)</code></div><pre class="doc">SENTINEL get-master-addr-by-name name

get master address by master name..

Available since: .

Time complexity: O(1)</pre></div><div class="public" id="var-sentinel-sentinels"><h3>sentinel-sentinels</h3><div class="usage"><code>(sentinel-sentinels name)</code></div><pre class="doc">SENTINEL sentinels name

get sentinel instances by mater name..

Available since: .

Time complexity: O(1)</pre></div><div class="public" id="var-sentinel-slaves"><h3>sentinel-slaves</h3><div class="usage"><code>(sentinel-slaves name)</code></div><pre class="doc">SENTINEL slaves name

get slaves address by master name..

Available since: .

Time complexity: O(1)</pre></div><div class="public" id="var-set-sentinel-groups%21"><h3>set-sentinel-groups!</h3><div class="usage"><code>(set-sentinel-groups! conf)</code></div><pre class="doc">Configure sentinel groups, it will replace current conf:
 {:group-name {:specs  [{ :host host
                        :port port
                        :password password
                        :timeout-ms timeout-ms },
                       ...other sentinel instances...]
               :pool {&lt;opts&gt;}}}
The conf is a map of sentinel group to connection spec.</pre></div><div class="public" id="var-sync-on"><h3>sync-on</h3><h4 class="macro">macro</h4><div class="usage"><code>(sync-on sg mn &amp; body)</code></div><pre class="doc"></pre></div><div class="public" id="var-unregister-listener%21"><h3>unregister-listener!</h3><div class="usage"><code>(unregister-listener! listener)</code></div><pre class="doc">Remove the listener for switching master.
</pre></div><div class="public" id="var-update-conn-spec"><h3>update-conn-spec</h3><div class="usage"><code>(update-conn-spec conn)</code></div><pre class="doc">Cast a carmine-sentinel conn to carmine raw conn spec.
It will resolve master from sentinel first time,then cache the result in
memory for reusing.</pre></div><div class="public" id="var-wcar"><h3>wcar</h3><h4 class="macro">macro</h4><div class="usage"><code>(wcar conn :as-pipeline &amp; body)</code><code>(wcar conn &amp; body)</code></div><pre class="doc">It&apos;s the same as taoensso.carmine/wcar, but supports
   :master-name &quot;mymaster&quot;
   :sentinel-group :default
in conn for redis sentinel cluster.
</pre></div></div></body></html>